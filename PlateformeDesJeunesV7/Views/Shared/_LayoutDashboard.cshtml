@using Microsoft.AspNetCore.Http
@using Domain.Models
@inject IHttpContextAccessor Accessor

<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <!-- Favicon icon-->
    <link rel="shortcut icon" type="image/x-icon" href="~/assets/images/logo143.jpeg">


    <!-- Libs CSS -->
    <link href="~/Design/fonts/feather/feather.css" rel="stylesheet" />
    <link href="~/Design/libs/dragula/dist/dragula.min.css" rel="stylesheet" />
    <link href="~/Design/libs/mdi/font/css/materialdesignicons.min.css" rel="stylesheet" />
    <link href="~/Design/libs/prismjs/themes/prism.css" rel="stylesheet" />
    <link href="~/Design/libs/dropzone/dist/dropzone.css" rel="stylesheet" />
    <link href="~/Design/libs/magnific-popup/dist/magnific-popup.css" rel="stylesheet" />
    <link href="~/Design/libs/bootstrap-select/dist/css/bootstrap-select.min.css" rel="stylesheet">
    <link href="~/Design/libs/yaireo/tagify/dist/tagify.css" rel="stylesheet">
    <link href="~/Design/libs/tiny-slider/dist/tiny-slider.css" rel="stylesheet">
    <link href="~/Design/libs/tippy.js/dist/tippy.css" rel="stylesheet">
    <link href="~/Design/libs/cd" rel="stylesheet">

    <link href="~/Design/libs/cdnjscloudflarecom/ajax/libs/font-awesome\5.11.2/css/all.css" rel="stylesheet">


    <!-- Theme CSS -->
    <link rel="stylesheet" href="~/Design/css/theme.min.css">
    <title>Plateforme des jeunes</title>

    <!-- CSS -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css" />
    <!-- Default theme -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css" />

    <link href="~/css/cercles.css" rel="stylesheet" />
    <link href="~/css/style.css" rel="stylesheet" />
</head>

<body>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3966S795V1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-3966S795V1');
    </script>
    <!-- Wrapper -->
    <div id="db-wrapper" class="toggled">
        <!-- Sidebar -->
        <nav class="navbar-vertical navbar" style="background-color: #002F44!important;border-right: #03354c 1px solid;">
            <div class="nav-scroller" style="text-align:center;">
                <!-- Brand logo -->
                <a class="navbar-brand" asp-controller="Candidats" asp-action="Index" style="padding:0px!important;"><img style="width:80%!important;height:180px;margin-bottom:3px;" src="~/background/logo143.jpeg" alt="" /></a>
                <!-- Navbar nav -->
                <ul class="navbar-nav flex-column" id="sideNavbar">
                    <!-- Nav item -->
                    
                        <li class="nav-item active">
                        <a class="nav-link active" href="#!" data-toggle="collapse" data-target="#navCourses1" aria-expanded="true"
                           aria-controls="navCourses1">
                                <i class="nav-icon fe fe-user mr-2"></i>Phase 1 :
                            </a>
                        <div id="navCourses1" class="collapse @(!User.IsInRole("Admin") ? "show" : "")" data-parent="#sideNavbar">
                                <ul class="nav flex-column">
                                @if (User.IsInRole("Gestionnaire") || User.IsInRole("Admin"))
                                    {
                                        <li class="nav-item">
                                            <a class="nav-link active" asp-controller="GestionCandidatPublic" asp-action="Index" style="color: white!important;">
                                                <i class="nav-icon fe fe-user-plus mr-2" style="color: white!important;"></i>Validation
                                            </a>
                                        </li>
                                    }
                                    @if (User.IsInRole("Admin"))
                                    {
                                        <li class="nav-item">
                                            <a class="nav-link active" asp-controller="Statistiques" asp-action="Index" style="color: white!important;">
                                                <i class="nav-icon fe fe-trending-up mr-2" style="color: white!important;"></i>Statistiques
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link active" asp-controller="GestionUtilisateur" asp-action="index" style="color: white!important;">
                                                <i class="nav-icon fe fe-users mr-2" style="color: white!important;"></i>Utilisateurs
                                            </a>
                                        </li>
                                        @if (!User.IsInRole("Gestionnaire"))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link active" asp-controller="GestionCandidatPublic" asp-action="Index" style="color: white!important;">
                                                    <i class="nav-icon fe fe-user-plus mr-2" style="color: white!important;"></i>Validation
                                                </a>
                                            </li>
                                        }
                                    }
                                @if (User.IsInRole("Gestionnaire") || User.IsInRole("Admin") || User.IsInRole("HeureJoyeuse") || User.IsInRole("Amideast"))
                                {
                                    <li class="nav-item">
                                        <a class="nav-link active" asp-controller="Formations" asp-action="index" style="color: white!important;">
                                            <i class="nav-icon fe fe-plus-square mr-2" style="color: white!important;"></i>Formations
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" asp-controller="Candidats" asp-action="Orientation" style="color: white!important;">
                                            <i class="nav-icon fe fe-check-circle mr-2" style="color: white!important;"></i>Orientations
                                        </a>
                                    </li>
                                }


                                </ul>
                            </div>
                        </li>
                    
                    @if (User.IsInRole("Finance") || User.IsInRole("Admin"))
                    {
                        <li class="nav-item">
                            <a class="nav-link active" href="#!" data-toggle="collapse" data-target="#navCourses2" aria-expanded="true"
                           aria-controls="navCourses2">
                                <i class="nav-icon fe fe-book mr-2"></i>Phase finance :
                            </a>
                            <div id="navCourses2" class="collapse " data-parent="#sideNavbar">
                                <ul class="nav flex-column">
                                    
                                        <li class="nav-item">
                                            <a class="nav-link active" asp-controller="Finances" asp-action="Index" style="color: white!important;">
                                                <i class="nav-icon fe fe-user-plus mr-2" style="color: white!important;"></i>Financement
                                            </a>
                                        </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" asp-controller="Finances" asp-action="Filtre" style="color: white!important;">
                                            <i class="nav-icon fe fe-user-plus mr-2" style="color: white!important;"></i>Détails
                                        </a>
                                    </li>
                                    @if (User.IsInRole("Admin"))
                                    {
                                        <li class="nav-item">
                                            <a class="nav-link active" asp-controller="Statistiques" asp-action="P2" style="color: white!important;">
                                                <i class="nav-icon fe fe-trending-up mr-2" style="color: white!important;"></i>Statistique
                                            </a>
                                        </li>
                                    }
                                </ul>
                            </div>
                        </li>
                    }
                    
                    @if (User.IsInRole("Comptable") || User.IsInRole("Admin"))
                    {
                        <li class="nav-item">
                            <a class="nav-link active" href="#!" data-toggle="collapse" data-target="#navCourses3" aria-expanded="true"
                               aria-controls="navCourses3">
                                <i class="nav-icon fe fe-book mr-2"></i>Phase comptabilité :
                            </a>
                            <div id="navCourses3" class="collapse @(User.IsInRole("Admin") ? "show" : "")" data-parent="#sideNavbar">
                                <ul class="nav flex-column">

                                    <li class="nav-item">
                                        <a class="nav-link active" asp-controller="Comptabilite" asp-action="Fonctionnements" style="color: white!important;">
                                            <i class="nav-icon fe fe-user-plus mr-2" style="color: white!important;"></i>Fonctionnements
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" asp-controller="Comptabilite" asp-action="Financements" style="color: white!important;">
                                            <i class="nav-icon fe fe-user-plus mr-2" style="color: white!important;"></i>Financements
                                        </a>
                                    </li>
                                    @if (User.IsInRole("Admin"))
                                    {
                                    <li class="nav-item">
                                        <a class="nav-link active" asp-controller="Comptabilite" asp-action="Chapitres" style="color: white!important;">
                                            <i class="nav-icon fe fe-user-plus mr-2" style="color: white!important;"></i>Exercices
                                        </a>
                                    </li>
                                        <li class="nav-item">
                                            <a class="nav-link active" asp-controller="Comptabilite" asp-action="BudgetFonctionnement" style="color: white!important;">
                                                <i class="nav-icon fe fe-trending-up mr-2" style="color: white!important;"></i>B fonctionnement
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link active" asp-controller="Comptabilite" asp-action="BudgetFinancement" style="color: white!important;">
                                                <i class="nav-icon fe fe-trending-up mr-2" style="color: white!important;"></i>B financement
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link active" asp-controller="Statistiques" asp-action="P3" style="color: white!important;">
                                                <i class="nav-icon fe fe-trending-up mr-2" style="color: white!important;"></i>Statistiques
                                            </a>
                                        </li>
                                    }
                                </ul>
                            </div>
                        </li>
                    }
                    
                </ul>
            </div>
            <a class="navbar-brand" asp-controller="Candidats" asp-action="index" style="position: absolute;padding: 0px!important;bottom: 0px;width: 100%; display: flex;justify-content: center;">
                <img style="width: 80%!important;height: 150px;margin-top: 20px;" src="~/background/newlogo.jpg" alt="" />
            </a>
        </nav>
        <!-- sidebar -->
        <!-- Page Content -->
        <div id="page-content">
            <div class="header">
                <!-- navbar -->
                <nav class="navbar-default navbar navbar-expand-lg">
                    <div class="d-none d-md-none d-lg-block">
                        <a onclick="retournerEnArriere()" style="cursor:pointer;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-return-left" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5z" />
                            </svg>
                        </a>
                    </div>
                    <a id="nav-toggle" href="#!" class="ml-lg-3 "><i class="fe fe-menu"></i></a>
                    <div class="ml-lg-3 d-none d-md-none d-lg-block" id="containerDiv">
                        <div id="backgroundDiv" style="top: 0; z-index: 1; position: absolute; height: 180px; width: 260px; background-color:white;"></div>
                        <img id="logoImage" src="~/Uploads/imglogoplateforme.jfif" style="z-index: 2; position: absolute; height: 140px;" />
                    </div>


                    <ul class="navbar-nav navbar-right-wrap ml-auto  d-flex nav-top-wrap ">
                        <li class="dropdown stopevent">
                            <a asp-action="Index" asp-controller="Notification" class="btn btn-light btn-icon rounded-circle indicator indicator-primary text-muted"
                               role="button" id="dropdownNotification" data-toggle="dropdown" aria-haspopup="true"
                               aria-expanded="false">
                                <i class="fe fe-bell"> </i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg" aria-labelledby="dropdownNotification">
                                <div>
                                    <div class="border-bottom px-3 pt-1 pb-3 d-flex justify-content-between align-items-center">
                                        <span class="h5 mb-0">Notifications</span>
                                        <a href="# " class="text-muted">
                                            <span class="align-middle">
                                                <i class="fe fe-settings mr-1"></i>
                                            </span>
                                        </a>
                                    </div>
                                    <ul class="list-group list-group-flush notification-list-scroll" id="notif_container">
                                        
                                    </ul>
                                    <div class="border-top px-3 pt-3 pb-0">
                                        <a href="notification-history.html" class="text-muted">See all Notifications</a>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="dropdown ml-2">
                            <a class="rounded-circle " href="#!" role="button" id="dropdownUser" data-toggle="dropdown"
                               aria-haspopup="true" aria-expanded="false">
                                <div class="avatar avatar-md avatar-indicators avatar-online">
                                    <img alt="avatar" src="~/Design/images/avatar/avatar-1.jpg" class="rounded-circle">
                                </div>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownUser">
                                <div class="dropdown-item">
                                    <div class="d-flex">
                                        <div class="avatar avatar-md avatar-indicators avatar-online">
                                            <img alt="avatar" src="~/Design/images/avatar/avatar-1.jpg" class="rounded-circle">
                                        </div>
                                        <div class="ml-3 lh-1">
                                            <h5 class="mb-1" id="username_signalR">@User.Identity.Name</h5>
                                            <p class="mb-0 text-muted">Bienvenue</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="dropdown-divider"></div>
                                <ul class="list-unstyled">
                                <li class="dropdown-submenu dropleft-lg">
                                <a class="dropdown-item dropdown-list-group-item dropdown-toggle" href="#!">
                                <i class="fe fe-circle mr-2"></i>Status
                                </a>
                                <ul class="dropdown-menu">
                                <li>
                                <a class="dropdown-item" href="#!">
                                <span class="badge-dot bg-success mr-2"></span>Online
                                </a>
                                </li>
                                <li>
                                <a class="dropdown-item" href="#!">
                                <span class="badge-dot bg-secondary mr-2"></span>Offline
                                </a>
                                </li>
                                <li>
                                <a class="dropdown-item" href="#!">
                                <span class="badge-dot bg-warning mr-2"></span>Away
                                </a>
                                </li>
                                <li>
                                <a class="dropdown-item" href="#!">
                                <span class="badge-dot bg-danger mr-2"></span>Busy
                                </a>
                                </li>
                                </ul>
                                </li>
                                <li>
                                <a class="dropdown-item" href="profile-edit.html">
                                <i class="fe fe-user mr-2"></i>Profile
                                </a>
                                </li>
                                <li>
                                <a class="dropdown-item" href="student-subscriptions.html">
                                <i class="fe fe-star mr-2"></i>Subscription
                                </a>
                                </li>
                                <li>
                                <a class="dropdown-item" href="#!">
                                <i class="fe fe-settings mr-2"></i>Settings
                                </a>
                                </li>
                                </ul>
                                <div class="dropdown-divider"></div>
                                <ul class="list-unstyled">
                                    <li>
                                        <form method="get" class="dropdown-item" asp-action="Logout" asp-controller="Authentication" asp-route-returnUrl="@Url.Action("Index", "Candidats")">
                                            <i class="fe fe-power mr-2"></i><button style="display:inline!important; " type="submit" class="nav-link btn btn-link text-dark">Déconnexion</button>
                                        </form>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </nav>
            </div>
            @*<div class="position-relative" style="width:100%;height:150px;">
                
            </div>*@
            <!-- Page Header -->
            @RenderBody()

        </div>



        <!-- Scripts -->
        <!-- Libs JS -->
        <script src="~/lib/microsoft/signalr/dist/browser/signalr.min.js"></script>
        <script src="~/js/chat.js"></script>

        <script src="~/Design/libs/jquery/dist/jquery.min.js"></script>
        <script src="~/Design/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
        <script src="~/Design/libs/odometer/odometer.min.js"></script>
        <script src="~/Design/libs/jquery-slimscroll/jquery.slimscroll.min.js"></script>
        <script src="~/Design/libs/magnific-popup/dist/jquery.magnific-popup.min.js"></script>
        <script src="~/Design/libs/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
        <script src="~/Design/libs/flatpickr/dist/flatpickr.min.js"></script>
        <script src="~/Design/libs/inputmask/dist/jquery.inputmask.min.js"></script>
        <script src="~/Design/libs/apexcharts/dist/apexcharts.min.js"></script>
        <script src="~/Design/libs/quill/dist/quill.min.js"></script>
        <script src="~/Design/libs/file-upload-with-preview/dist/file-upload-with-preview.min.js"></script>
        <script src="~/Design/libs/dragula/dist/dragula.min.js"></script>
        <script src="~/Design/libs/bs-stepper/dist/js/bs-stepper.min.js"></script>
        <script src="~/Design/libs/dropzone/dist/min/dropzone.min.js"></script>
        <script src="~/Design/libs/jQuery.print/jQuery.print.js"></script>
        <script src="~/Design/libs/prismjs/prism.js"></script>
        <script src="~/Design/libs/prismjs/components/prism-scss.min.js"></script>
        <script src=""></script>

        <script src="~/Design/libs/yaireo/tagify/dist/tagify.min.js"></script>
        <script src="~/Design/libs/tiny-slider/dist/min/tiny-slider.js"></script>
        <script src="~/Design/libs/popperjs/core/dist/umd/popper.min.js"></script>
        <script src="~/Design/libs/tippy.js/dist/tippy-bundle.umd.min.js"></script>
        <script src="~/Design/libs/typed.js/lib/typed.min.js"></script>

        <!-- clipboard -->
        <script src="~/Design/libs/cdnjscloudflarecom/ajax/libs/clipboard.js/1.5.12/clipboard.min.js"></script>
        <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>

        <!-- Theme JS -->
        <script src="~/Design/js/theme.min.js"></script>

        
        <script>
            function goToNotification() {
                return window.location.replace("@(Url.Action("Notification", "Clients"))");
            }
            function DeleteNotif(Id) {
                $("#" + Id).remove();
            }
            function retournerEnArriere() {
                history.back();
            }
            window.onload = function () {
                centerImageHorizontally();
                window.addEventListener('resize', centerImageHorizontally); // pour re-centrer l'image si la fenêtre est redimensionnée
            }

            function centerImageHorizontally() {
                var image = document.getElementById('logoImage');
                var containerDiv = document.getElementById('containerDiv');

                var viewportWidth = window.innerWidth || document.documentElement.clientWidth;

                // En supposant que l'image ait déjà été chargée et que ses dimensions soient disponibles
                var imageWidth = image.offsetWidth;

                // Calculez la position pour centrer l'image horizontalement
                var leftPosition = (viewportWidth - imageWidth) / 2;

                image.style.top = '0px';
                image.style.left = leftPosition + 'px';

                // Pour le div blanc derrière l'image, vous pouvez le décaler en conséquence
                var backgroundDiv = document.getElementById('backgroundDiv');
                backgroundDiv.style.top = '0px';
                backgroundDiv.style.left = (leftPosition - 20) + 'px'; // Vous pouvez ajuster ces valeurs pour obtenir le décalage souhaité
            }
            function removeToggledClass() {
                var dbWrapper = document.getElementById('db-wrapper');

                if (window.innerWidth < 768) {
                    dbWrapper.classList.remove('toggled');
                } else {
                    dbWrapper.classList.add('toggled');
                }
            }

            // Exécutez la fonction lorsque la page est chargée et redimensionnée
            window.addEventListener('load', removeToggledClass);
            window.addEventListener('resize', removeToggledClass);
        </script>


        @await RenderSectionAsync("Scripts", required: false)
    </div>
</body>


</html>
@* 
@section Scripts {
    <script src="~/lib/microsoft/signalr/dist/browser/signalr.min.js"></script>
    <script src="~/js/chat.js"></script> *@
    @*<script>
        $(document).ready(function () {
            alert($(window).width());
        });
        
    </script>*@



        