@model Domain.Entities.Client


@{
    Layout = "_LayoutDashboard";
    string date = "";
}

<!-- Page header-->
<div class="py-4 py-lg-6 bg-primary" style="
    background-color: #04ADEF!important;">
    <div class="container">
        <div class="row">
            <div class="offset-lg-1 col-lg-10 col-md-12 col-12">
                <div class="d-lg-flex align-items-center justify-content-between">
                    <!-- Content -->
                    <div class="mb-4 mb-lg-0">
                        <h1 class="text-white mb-1">Modifier les informations d'un candidat</h1>
                        <p class="mb-0 text-white lead">
                            Remplissez simplement le formulaire ci dessous.
                        </p>
                    </div>
                    <div>
                        @*<a href="instructor-courses.html" class="btn btn-white ">Back to Course</a>
                        <a href="instructor-courses.html" class="btn btn-success ">Save</a>*@
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Page Content -->
<div class="pb-12">
    <div class="container">
        <div id="courseForm" class="bs-stepper">
            <div class="row">
                <div class="offset-lg-1 col-lg-10 col-md-12 col-12">
                    <!-- Stepper Button -->
                    <div class="bs-stepper-header shadow-sm" role="tablist">
                        <div class="step" data-target="#test-l-1">
                            <button type="button" class="step-trigger" role="tab" id="courseFormtrigger1" aria-controls="test-l-1">
                                <span class="bs-stepper-circle">1</span>
                                <span class="bs-stepper-label">Informations basique</span>
                            </button>
                        </div>
                        <div class="bs-stepper-line"></div>
                        <div class="step" data-target="#test-l-2">
                            <button type="button" class="step-trigger" role="tab" id="courseFormtrigger2" aria-controls="test-l-2">
                                <span class="bs-stepper-circle">2</span>
                                <span class="bs-stepper-label">Photo de profil</span>
                            </button>
                        </div>
                        <div class="bs-stepper-line"></div>
                        <div class="step" data-target="#test-l-3">
                            <button type="button" class="step-trigger" role="tab" id="courseFormtrigger3" aria-controls="test-l-3">
                                <span class="bs-stepper-circle">3</span>
                                <span class="bs-stepper-label">Diplomes</span>
                            </button>
                        </div>
                        <div class="bs-stepper-line"></div>
                        <div class="step" data-target="#test-l-4">
                            <button type="button" class="step-trigger" role="tab" id="courseFormtrigger4" aria-controls="test-l-4">
                                <span class="bs-stepper-circle">4</span>
                                <span class="bs-stepper-label">Documents</span>
                            </button>
                        </div>
                    </div>
                    <!-- Stepper content -->
                    <div class="bs-stepper-content mt-5">
                        <form asp-action="Edit" method="post" enctype="multipart/form-data">
                            <input asp-for="ClientID" value="@Model.ClientID" style="display:none;" />
                            <!-- Content one -->
                            <div id="test-l-1" role="tabpanel" class="bs-stepper-pane fade" aria-labelledby="courseFormtrigger1">
                                <!-- Card -->
                                <div class="card mb-3 ">
                                    <div class="card-header border-bottom px-4 py-3">
                                        <h4 class="mb-0">Information basique</h4>
                                    </div>
                                    <!-- Card body -->
                                    <div class="card-body">
                                        <div class="form-group">
                                            <label for="Nom" class="form-label">Nom</label>
                                            <input id="Nom" class="form-control" type="text" placeholder="Nom" required asp-for="Nom" />
                                        </div>
                                        <div class="form-group">
                                            <label for="Prenom" class="form-label">Prénom</label>
                                            <input id="Prenom" class="form-control" type="text" placeholder="Prénom" required asp-for="Prenom" />
                                        </div>
                                        <div class="form-group">
                                            <label for="selectDate" class="form-label">Date de naissance</label>
                                            <input required asp-for="DateNaissance" type="text" id="selectDate" class="form-control text-dark flatpickr"
                                                   placeholder="Sélectionner la date de naissance" />
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Situation familiale</label>
                                            <select required asp-for="SituationFamilial" class="selectpicker" data-width="100%">
                                                <option>Celibataire</option>
                                                <option>Marié</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Sexe</label>
                                            <select required asp-for="Sexe" class="selectpicker" data-width="100%">
                                                <option>Homme</option>
                                                <option>Femme</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <!-- Title -->
                                            <label for="postTitle" class="form-label">Adresse</label>
                                            <input asp-for="Adresse" type="text" id="postTitle" class="form-control text-dark" placeholder="Adresse" />
                                        </div>

                                        <div class="form-group">
                                            <!-- Title -->
                                            <label for="postTitle" class="form-label">Email</label>
                                            <input required asp-for="Email" type="email" id="postTitle" class="form-control text-dark" placeholder="Email" />
                                        </div>
                                        <div class="form-group">
                                            <!-- Title -->
                                            <label for="postTitle" class="form-label">Téléphone</label>
                                            <input required asp-for="Telephone" type="tel" id="postTitle" class="form-control text-dark" placeholder="Téléphone" />
                                        </div>
                                        <div class="form-group">
                                            <!-- Title -->
                                            <label for="postTitle" class="form-label">Découverte de la plateforme</label>
                                            <input required asp-for="DecouvertePlateForme" type="text" id="postTitle" class="form-control text-dark" placeholder="Ou avez-vous découvert notre plateforme ?" />
                                        </div>
                                        <div class="form-group">
                                            <!-- Title -->
                                            <label for="postTitle" class="form-label">CIN</label>
                                            <input required asp-for="CIN" type="text" id="postTitle" class="form-control text-dark" placeholder="Carte d'identité nationale" />
                                        </div>
                                        <div class="form-group">
                                            <label for="selectDate" class="form-label">Date d'hadèration</label>
                                            <input required asp-for="DateAderation" type="text" id="selectDate" class="form-control text-dark flatpickr"
                                                   placeholder="Sélectionner la date d'hadèration" />
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Statut</label>
                                            <select required asp-for="Statut" class="selectpicker" data-width="100%">
                                                <option value="@Statut.ChercheurEmploit">Chercheur d'emploit</option>
                                                <option value="@Statut.PorteurDeProjet">Porteur de projet</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Orientation</label>
                                            <select required asp-for="Orientation" class="selectpicker" data-width="100%">
                                                <option value="@Orientation.NonOrienté">Non orienté</option>
                                                <option value="@Orientation.Orienté">Orienté</option>
                                                <option value="@Orientation.Refusé">Refusé</option>
                                                <option value="@Orientation.Financé">Financé</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="Prenom" class="form-label">Commentaire</label>
                                            <input id="Prenom" class="form-control" type="text" placeholder="Commentaire" asp-for="Commentaire" />
                                        </div>

                                    </div>
                                </div>
                                <h5 style="color:#ff0000b3;text-decoration: underline;">@ViewData["Message"]</h5>
                                <!-- Button -->
                                <button class="btn btn-primary" onclick="courseForm.next()">
                                    Suivant
                                </button>
                            </div>
                            <!-- Content two -->
                            <div id="test-l-2" role="tabpanel" class="bs-stepper-pane fade" aria-labelledby="courseFormtrigger2">
                                <!-- Card -->
                                <div class="card mb-3  border-0">
                                    <div class="card-header border-bottom px-4 py-3">
                                        <h4 class="mb-0">Media</h4>
                                    </div>
                                    <!-- Card body -->
                                    <div class="card-body">
                                        <div class="custom-file-container" data-upload-id="courseCoverImg" id="courseCoverImg">
                                            <label class="form-label">
                                                Photo de profil
                                                <a href="javascript:void(0)" class="custom-file-container__image-clear"
                                                   title="Clear Image"></a>
                                            </label>
                                            <input asp-for="ImageUrl" value="@Model.ImageUrl" style="display:none;" />
                                            <label class="custom-file-container__custom-file">
                                                <input asp-for="File" type="file" class="custom-file-container__custom-file__custom-file-input"
                                                        />
                                                <input type="hidden" name="MAX_FILE_SIZE" value="10485760" />
                                                <span class="custom-file-container__custom-file__custom-file-control"></span>
                                            </label>
                                            <small class="mt-3 d-block">
                                                Upload your course image here. It must meet
                                                our
                                                course image quality standards to be accepted.
                                                Important guidelines: 750x440 pixels; .jpg, .jpeg,.
                                                gif, or .png. no text on the image.
                                            </small>
                                            <div class="custom-file-container__image-preview"></div>
                                        </div>

                                    </div>
                                </div>
                                <h5 style="color:#ff0000b3;text-decoration: underline;">@ViewData["MessageDocument"]</h5>
                                <!-- Button -->
                                <div class="d-flex justify-content-between">
                                    <button class="btn btn-secondary" onclick="courseForm.previous()">
                                        Précedent
                                    </button>
                                    <button class="btn btn-primary" onclick="courseForm.next()">
                                        Suivant
                                    </button>
                                </div>
                            </div>
                            <!-- Content three -->
                            <div id="test-l-3" role="tabpanel" class="bs-stepper-pane fade" aria-labelledby="courseFormtrigger3">
                                <!-- Card -->
                                <div class="card mb-3  border-0">
                                    <div class="card-header border-bottom px-4 py-3">
                                        <h4 class="mb-0">Diplomes</h4>
                                    </div>
                                    <!-- Card body -->
                                    <div class="card-body ">
                                        <div class="bg-light rounded p-2 mb-4">
                                            @{
                                                int numberDiplome = 0;

                                                @if (Model.Diplomes == null)
                                                {
                                                    <div class="alert alert-dark" role="alert">
                                                        Aucun diplome trouvé
                                                    </div>
                                                }
                                                else
                                                {
                                                    @foreach (var item in Model.Diplomes)
                                                    {

                                                        date = item.DateObtentionDiplome.ToShortDateString();

                                                        <div class="alert alert-warning" role="alert">
                                                            Diplome @(numberDiplome+1)
                                                        </div>

                                                        <div class="form-group"><label class="control-label">Nom du diplome</label><input required name="Diplomes[@numberDiplome].DiplomeName" value="@item.DiplomeName" class="form-control" /></div>
                                                        <div class="form-group"><label class="control-label">Branche</label><input required name="Diplomes[@numberDiplome].Branche" value="@item.Branche" class="form-control" /></div>
                                                        <div class="form-group"><label class="control-label">Institut</label><input required name="Diplomes[@numberDiplome].InstitutName" value="@item.InstitutName" class="form-control" /></div>
                                                        <div class="form-group">
                                                            <label for="selectDate" class="form-label">Date d'obtention du diplome</label>
                                                            <input required name="Diplomes[@numberDiplome].DateObtentionDiplome" value="@item.DateObtentionDiplome" type="text" id="selectDate" class="form-control text-dark flatpickr"
                                                           placeholder="@date" />
                                                           <input style="display:none;" required name="Diplomes[@numberDiplome].ClientID" value="@item.ClientID">
                                                        <input style="display:none;" required name="Diplomes[@numberDiplome].DiplomeID" value="@item.DiplomeID">
                                                        </div>

                                                        numberDiplome++;
                                                    }
                                                }
                                                <div class="DiplomeCtnFor">
                                                </div>
                                                <div class="btn btn-primary" style="width:100%; text-align:center; margin-bottom:10px; cursor:pointer;" onclick="AddDiplomeFor(@Html.Raw(numberDiplome))"><i class="bi bi-plus-circle" style="cursor:pointer; ">   Ajouter un diplome</i></div>

                                            }

                                        </div>
                                    </div>
                                </div>
                                <!-- Button -->
                                <div class="d-flex justify-content-between">
                                    <button class="btn btn-secondary" onclick="courseForm.previous()">
                                        Précedent
                                    </button>
                                    <button class="btn btn-primary" onclick="courseForm.next()">
                                        Suivant
                                    </button>
                                </div>
                            </div>
                            <!-- Content four -->
                            <div id="test-l-4" role="tabpanel" class="bs-stepper-pane fade" aria-labelledby="courseFormtrigger4">
                                <!-- Card -->
                                <div class="card mb-3  border-0">
                                    <div class="card-header border-bottom px-4 py-3">
                                        <h4 class="mb-0">Documents</h4>
                                    </div>
                                    <!-- Card body -->
                                    <div class="card-body">
                                        <div class="form-group col-md-12">


                                            @{
                                                int numberDocument = 0;
                                            }
                                            @if (Model.Documents == null)
                                            {
                                                <div class="alert alert-dark" role="alert">
                                                    Aucun document trouvé
                                                </div>

                                            }
                                            else
                                            {
                                                foreach (var item in Model.Documents)
                                                {
                                                    <div class="alert alert-warning" role="alert">
                                                        Document @(numberDocument+1)
                                                    </div>
                                                    <br />
                                                    <a class="btn btn-primary" target="_blank" asp-action="@item.NomFichier" asp-controller="Documents" data-component="link" data-source="inlineLink" data-type="internalLink" data-ordinal="1">Download : @Html.DisplayFor(modelItem => item.NomFichier)</a>
                                                    <input style="display:none;" name="Documents[@numberDocument].ClientID" class="form-control" value="@item.ClientID" />
                                                    <input style="display:none;" name="Documents[@numberDocument].DocumentID" class="form-control" value="@item.DocumentID" />
                                                    <input style="display:none;" name="Documents[@numberDocument].NomFichier" value="@item.NomFichier">
                                                    <br />

                                                    <div class="form-group"><label class="control-label">Nom du fichier</label><input required value="@item.Designation" name="Documents[@numberDocument].Designation" class="form-control" /></div>
                                                    <div class="form-group">
                                                        <label for="validationValidFileInput1">Fichier</label>

                                                        <div class="custom-file">
                                                            <input name="Documents[@numberDocument].File" type="file" placeholder="@item.NomFichier"
                                                           id="file">
                                                        </div>

                                                    </div>

                                                    numberDocument++;
                                                }
                                               
                                            }
                                             <div class="DocumentCtnFor">
                                                </div>
                                                <div class="btn btn-primary" style="width:100%; text-align:center; margin-bottom:10px; cursor:pointer;" onclick="AddDocumentFor(@Html.Raw(numberDocument))"><i class="bi bi-plus-circle" style="cursor:pointer; ">   Ajouter un document</i></div>


                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between mb-22">
                                    <!-- Button -->
                                    <button class="btn btn-secondary mt-5" onclick="courseForm.previous()">
                                        Précedent
                                    </button>
                                    <div class="custom-control custom-checkbox">
                                        <input required type="checkbox" class="custom-control-input" id="customCheck1">
                                        <label class="custom-control-label" for="customCheck1">Cocher la case pour confirmer l'envoi</label>
                                    </div>
                                    <button type="submit" class="btn btn-danger mt-5">
                                        Envoyer
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@section Scripts {
    <script>
        $(document).ready(function() {
            $(".custom-file-container__image-preview").css('background-image', 'url(/Uploads/@Model.ImageUrl)');

            $(".dz-button").text('Saisir l\'image du candidat');
        });
    </script>
    <script>
        var indexPrem = 0;
        var indexDocPrem = 0;
        var index = 0;
        var indexDoc = 0;
        var indexSF = 0;
        var indexSFPrem = 0;

        function AddDiplomeFor(numberDiplome) {
            if (indexPrem != 100) {
                index = numberDiplome;
            }
            indexPrem = 100;

            $('.DiplomeCtnFor').append("<input style=\"display:none;\" required name=\"Diplomes["+numberDiplome+"].ClientID\" value=\"@Model.ClientID\"> <div class=\"form-group\"><label class=\"control-label\">Nom du diplome</label><input name=\"Diplomes[" + index + "].DiplomeName\" class=\"form-control\" /></div><div class=\"form-group\"><label class=\"control-label\">Branche</label><input name=\"Diplomes[" + index + "].Branche\" class=\"form-control\" /></div><div class=\"form-group\"><label class=\"control-label\">Institut</label><input name=\"Diplomes[" + index + "].InstitutName\" class=\"form-control\" /></div> <div class=\"form-group\"><label class=\"control-label\">Date d'obtention du diplome</label><input name=\"Diplomes[" + index + "].DateObtentionDiplome\" type=\"datetime-local\" class=\"form-control\" /></div>");
            index++;

        }
        function AddDiplome(numberDiplome) {
            if (indexPrem != 100) {
                index = numberDiplome;
            }
            indexPrem = 100;

            $('.DiplomeCtn').append("<input style=\"display:none;\" required name=\"Diplomes["+numberDiplome+"].ClientID\" value=\"@Model.ClientID\"> <div class=\"form-group\"><label class=\"control-label\">Nom du diplome</label><input name=\"Diplomes[" + index + "].DiplomeName\" class=\"form-control\" /></div><div class=\"form-group\"><label class=\"control-label\">Branche</label><input name=\"Diplomes[" + index + "].Branche\" class=\"form-control\" /></div><div class=\"form-group\"><label class=\"control-label\">Institut</label><input name=\"Diplomes[" + index + "].InstitutName\" class=\"form-control\" /></div> <div class=\"form-group\"><label class=\"control-label\">Date d'obtention du diplome</label><input name=\"Diplomes[" + index + "].DateObtentionDiplome\" type=\"datetime-local\" class=\"form-control\" /></div>");
            index++;

        }
        function AddDocumentFor(numberDocument) {
            if (indexDocPrem != 100) {
                indexDoc = numberDocument;
            }
            indexDocPrem = 100;
            $('.DocumentCtnFor').append("<input style=\"display:none;\" required name=\"Documents["+indexDoc+"].ClientID\" value=\"@Model.ClientID\"><div class=\"form-group\"><label class=\"control-label\">Nom du fichier</label><input name=\"Documents[" + indexDoc + "].Designation\" class=\"form-control\" /></div><div class=\"form-group\"><label class=\"control-label\">Fichier</label><input name=\"Documents[" + indexDoc + "].File\" class=\"form-control-file\" type=\"file\" /></div>");
            indexDoc++;
        }
        function AddDocument(numberDocument) {
            if (indexDocPrem != 100) {
                indexDoc = numberDocument;
            }
            indexDocPrem = 100;
            $('.DocumentCtn').append("<input style=\"display:none;\" required name=\"Documents["+indexDoc+"].ClientID\" value=\"@Model.ClientID\"><div class=\"form-group\"><label class=\"control-label\">Nom du fichier</label><input name=\"Documents[" + indexDoc + "].Designation\" class=\"form-control\" /></div><div class=\"form-group\"><label class=\"control-label\">Fichier</label><input name=\"Documents[" + indexDoc + "].File\" class=\"form-control-file\" type=\"file\" /></div>");
            indexDoc++;
        }

        function AddSuiviFormation(numberSuiviFormation) {
            if (indexSF != 100) {
                indexSF = numberSuiviFormation;
            }
            indexSFPrem = 100;
            $('.SuiviFormationCtn').append("<div class=\"form-group\"><label class=\"control-label\">Date de la formation</label><input type=\"date\" name=\"SuiviFormationModel[" + indexSF + "].DateFormation\" class=\"form-control\" /></div><div class=\"form-group\"><label class=\"control-label\">Durée en jours</label><input name=\"SuiviFormationModel[" + indexSF + "].DureeFormation\" class=\"form-control\" /></div> <div class=\"form-group\"><label class=\"control-label\">Thème</label><input  name=\"SuiviFormationModel[" + indexSF + "].Theme\" class=\"form-control\"  /></div>");
            indexSF++;
        }
    </script>
}
